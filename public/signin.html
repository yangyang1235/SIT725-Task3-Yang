<html>
    <title>Signin</title>
    <head>
        <title>vaccine system</title>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
        <link href="style.css" rel="stylesheet">
        <nav class="navbar navbar-light" style="background-color: #e3f2fd;">
            <div class="container-fluid">
              <a class="navbar-brand" href="#">
                <img src="images/vaccine.png" alt="" width="88" height="50" class="d-inline-block align-text-top">
                <h7>Vaccine Booking System</h7>
              </a>
              <ul class="nav" >
                <li class="nav-item">
                  <a class="nav-link active" aria-current="page" href="index.html">Homepage</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="register.html">Register</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="signin.html">Sign in</a>
                </li>
              </ul>
            </div>
          </nav>
    </head>
    <body>
        <br>
        <div class="container">
            <div class="card text-center">
                <div class="card-header" style="background-color: #e3f2fd;">
                    Sign in your account
                </div>
            </div>
        </div>
        <div class="container">
          <form id="signin-form">
            <div class="form-floating mb-3">
              <input type="email" class="form-control" id="username" placeholder="Username">
                <label for="floatingInput">Email address</label>
              </div>
              <div class="form-floating">
                <input type="password" class="form-control" id="password" placeholder="Password">
                <label for="floatingPassword">Password</label>
              </div>
              <br>
              <div class="card text-center">
              <button type="submit" class="btn btn-primary btn-lg">Sign in</button> </div>
        </div>
        </form>

        <script>
          const form = document.getElementById('signin-form')
          form.addEventListener('submit', login)
          
          async function login(event) {
              event.preventDefault()
              const username = document.getElementById('username').value
              const password = document.getElementById('password').value

              const result = await fetch('/api/login', {
                  method:'POST',
                  headers: {
                      'Content-Type': 'application/json'
                  },
                  body: JSON.stringify({
                      username,
                      password
                  })
              }).then((res) => res.json())

              if (result.status === 'ok'){
                console.log('Password correct: ', result.data)
                alert('Sucess')
              } else {
                alert(result.error)
              }
          }
      </script>
    </body>
</html>